# –°–∏–º—É–ª—è—Ü–∏—è —Ä–∞–±–æ—Ç—ã Event-Driven –∫—ç—à–∞ —Ä–æ–ª–µ–π

## üéØ –°—Ü–µ–Ω–∞—Ä–∏–π: –†–∞–±–æ—Ç–∞ –±–æ—Ç–∞ –≤ —Ç–µ—á–µ–Ω–∏–µ –¥–Ω—è

### üìä **–ò—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ:**
- **–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**: 1000
- **–ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –∑–∞ –¥–µ–Ω—å**: 50
- **–ó–∞–ø—Ä–æ—Å–æ–≤ –≤ –¥–µ–Ω—å**: 10000
- **–ò–∑–º–µ–Ω–µ–Ω–∏–π —Ä–æ–ª–µ–π**: 5 (–¥–æ–±–∞–≤–ª–µ–Ω–∏–µ/—É–¥–∞–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–æ–≤)

---

## üîÑ **–ü–æ—à–∞–≥–æ–≤–∞—è —Å–∏–º—É–ª—è—Ü–∏—è**

### **üïê 00:00 - –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞**

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Event-Driven –∫—ç—à –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω    ‚îÇ
‚îÇ –ö—ç—à: {} (–ø—É—Å—Ç–æ–π)                    ‚îÇ
‚îÇ –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: hits=0, misses=0        ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### **üïê 08:00 - –ü–µ—Ä–≤—ã–µ –∑–∞–ø—Ä–æ—Å—ã –¥–Ω—è**

#### **–ó–∞–ø—Ä–æ—Å 1: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 123 (–Ω–æ–≤—ã–π)**
```
1. cache.get_role(123, fetch_from_db)
2. –ö—ç—à: {} ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 123 –Ω–µ –Ω–∞–π–¥–µ–Ω
3. fetch_from_db(123) ‚Üí "user"
4. –ö—ç—à: {123: "user"}
5. –í–æ–∑–≤—Ä–∞—Ç: "user"
6. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: hits=0, misses=1
```

#### **–ó–∞–ø—Ä–æ—Å 2: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 456 (–Ω–æ–≤—ã–π)**
```
1. cache.get_role(456, fetch_from_db)
2. –ö—ç—à: {123: "user"} ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 456 –Ω–µ –Ω–∞–π–¥–µ–Ω
3. fetch_from_db(456) ‚Üí "user"
4. –ö—ç—à: {123: "user", 456: "user"}
5. –í–æ–∑–≤—Ä–∞—Ç: "user"
6. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: hits=0, misses=2
```

#### **–ó–∞–ø—Ä–æ—Å 3: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 123 (–ø–æ–≤—Ç–æ—Ä–Ω—ã–π)**
```
1. cache.get_role(123, fetch_from_db)
2. –ö—ç—à: {123: "user", 456: "user"} ‚Üí –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 123 –Ω–∞–π–¥–µ–Ω!
3. –í–æ–∑–≤—Ä–∞—Ç: "user" (–∏–∑ –∫—ç—à–∞)
4. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: hits=1, misses=2
```

### **üïê 10:00 - –ê–¥–º–∏–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç –Ω–æ–≤–æ–≥–æ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**

#### **–°–æ–±—ã—Ç–∏–µ: –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 789)**
```
1. UsersRepo.upsert(789, role="admin")
2. –ë–î: UPDATE users SET role="admin" WHERE user_id=789
3. role_cache.update_role(789, "admin")
4. –ö—ç—à: {123: "user", 456: "user", 789: "admin"}
5. tracker.on_admin_added(789, "new_admin")
6. –õ–æ–≥: "Admin added event: 789 (@new_admin)"
```

#### **–ó–∞–ø—Ä–æ—Å 4: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 789 (–Ω–æ–≤—ã–π –∞–¥–º–∏–Ω)**
```
1. cache.get_role(789, fetch_from_db)
2. –ö—ç—à: {123: "user", 456: "user", 789: "admin"} ‚Üí –Ω–∞–π–¥–µ–Ω!
3. –í–æ–∑–≤—Ä–∞—Ç: "admin" (–∏–∑ –∫—ç—à–∞)
4. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: hits=2, misses=2
```

### **üïê 12:00 - –ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**

#### **–ó–∞–ø—Ä–æ—Å—ã 5-100: –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã –æ—Ç –∞–∫—Ç–∏–≤–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ 123, 456, 789 –¥–µ–ª–∞—é—Ç –º–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤:
- 123: 30 –∑–∞–ø—Ä–æ—Å–æ–≤ ‚Üí –≤—Å–µ –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ –∫—ç—à
- 456: 25 –∑–∞–ø—Ä–æ—Å–æ–≤ ‚Üí –≤—Å–µ –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ –∫—ç—à  
- 789: 20 –∑–∞–ø—Ä–æ—Å–æ–≤ ‚Üí –≤—Å–µ –ø–æ–ø–∞–¥–∞–Ω–∏—è –≤ –∫—ç—à

–ö—ç—à: {123: "user", 456: "user", 789: "admin"}
–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: hits=97, misses=2
```

### **üïê 14:00 - –ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏**

#### **–ó–∞–ø—Ä–æ—Å—ã 101-150: 50 –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
```
–ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏: 1000, 1001, 1002, ..., 1049

–î–ª—è –∫–∞–∂–¥–æ–≥–æ –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
1. cache.get_role(new_user_id, fetch_from_db)
2. –ö—ç—à –Ω–µ —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è ‚Üí –ø—Ä–æ–º–∞—Ö
3. fetch_from_db(new_user_id) ‚Üí "user"
4. –ö—ç—à: {123: "user", 456: "user", 789: "admin", new_user_id: "user"}
5. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: hits=97, misses=52
```

### **üïê 16:00 - –£–¥–∞–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞**

#### **–°–æ–±—ã—Ç–∏–µ: –£–¥–∞–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞ (–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 789)**
```
1. UsersRepo.upsert(789, role="user")
2. –ë–î: UPDATE users SET role="user" WHERE user_id=789
3. role_cache.update_role(789, "user")
4. –ö—ç—à: {123: "user", 456: "user", 789: "user", ...}
5. tracker.on_admin_removed(789, "new_admin")
6. –õ–æ–≥: "Admin removed event: 789 (@new_admin)"
```

#### **–ó–∞–ø—Ä–æ—Å 151: –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 789 (–ø–æ—Å–ª–µ —É–¥–∞–ª–µ–Ω–∏—è –∞–¥–º–∏–Ω–∫–∏)**
```
1. cache.get_role(789, fetch_from_db)
2. –ö—ç—à: {123: "user", 456: "user", 789: "user", ...} ‚Üí –Ω–∞–π–¥–µ–Ω!
3. –í–æ–∑–≤—Ä–∞—Ç: "user" (–∏–∑ –∫—ç—à–∞, —É–∂–µ –æ–±–Ω–æ–≤–ª–µ–Ω–æ)
4. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: hits=98, misses=52
```

### **üïê 18:00 - –ü–µ—Ä–µ–¥–∞—á–∞ –ø—Ä–∞–≤**

#### **–°–æ–±—ã—Ç–∏–µ: –ü–µ—Ä–µ–¥–∞—á–∞ –ø—Ä–∞–≤ (–æ—Ç 123 –∫ 2000)**
```
1. MailboxesRepo: UPDATE mailboxes SET creator_id=2000 WHERE id=1
2. UsersRepo.upsert(2000, role="admin")
3. role_cache.update_role(2000, "admin")
4. –ö—ç—à: {123: "user", 456: "user", 789: "user", 2000: "admin", ...}
5. tracker.on_admin_transferred(123, 2000, 1)
6. –õ–æ–≥: "Admin transfer event: 123 -> 2000 (mailbox: 1)"
```

### **üïê 20:00 - –ö–æ–Ω–µ—Ü –¥–Ω—è**

#### **–ò—Ç–æ–≥–æ–≤–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ Event-Driven –∫—ç—à - –ò—Ç–æ–≥–∏ –¥–Ω—è        ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ –í—Å–µ–≥–æ –∑–∞–ø—Ä–æ—Å–æ–≤: 10000               ‚îÇ
‚îÇ –ü–æ–ø–∞–¥–∞–Ω–∏—è: 9500                     ‚îÇ
‚îÇ –ü—Ä–æ–º–∞—Ö–∏: 500                        ‚îÇ
‚îÇ –ü—Ä–æ—Ü–µ–Ω—Ç –ø–æ–ø–∞–¥–∞–Ω–∏–π: 95%              ‚îÇ
‚îÇ –°–æ–±—ã—Ç–∏—è –æ–±—Ä–∞–±–æ—Ç–∞–Ω–æ: 5               ‚îÇ
‚îÇ –†–∞–∑–º–µ—Ä –∫—ç—à–∞: 1050 –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## üîç **–î–µ—Ç–∞–ª—å–Ω—ã–π –∞–Ω–∞–ª–∏–∑ —Ä–∞–±–æ—Ç—ã**

### **‚úÖ –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**

#### **1. –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 123:
–ó–∞–ø—Ä–æ—Å 1: –ü—Ä–æ–º–∞—Ö ‚Üí –ë–î ‚Üí –ö—ç—à {123: "user"}
–ó–∞–ø—Ä–æ—Å 2: –ü–æ–ø–∞–¥–∞–Ω–∏–µ ‚Üí –ö—ç—à {123: "user"}
–ó–∞–ø—Ä–æ—Å 3: –ü–æ–ø–∞–¥–∞–Ω–∏–µ ‚Üí –ö—ç—à {123: "user"}
...
```

#### **2. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**
```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 789:
–î–æ: –ö—ç—à {789: "admin"}
–°–æ–±—ã—Ç–∏–µ: –£–¥–∞–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∫–∏
–ü–æ—Å–ª–µ: –ö—ç—à {789: "user"}
–°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—Ä–æ—Å: –í–æ–∑–≤—Ä–∞—Ç "user" (–∞–∫—Ç—É–∞–ª—å–Ω–æ!)
```

#### **3. –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π**
```
–°–æ–±—ã—Ç–∏—è –¥–Ω—è:
1. –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞ 789
2. –£–¥–∞–ª–µ–Ω–∏–µ –∞–¥–º–∏–Ω–∞ 789  
3. –ü–µ—Ä–µ–¥–∞—á–∞ –ø—Ä–∞–≤ 123 ‚Üí 2000
4. –°–æ–∑–¥–∞–Ω–∏–µ 50 –Ω–æ–≤—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ä–æ–ª–µ–π –≤ –∫—ç—à–µ
```

### **üìä –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞ –ø–æ–ø–∞–¥–∞–Ω–∏–π:**

```
–§–æ—Ä–º—É–ª–∞: hits / (hits + misses) √ó 100%

–ê–∫—Ç–∏–≤–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (1000):
- –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å –∫–∞–∂–¥–æ–≥–æ: 1000 –ø—Ä–æ–º–∞—Ö–æ–≤
- –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã: 8500 –ø–æ–ø–∞–¥–∞–Ω–∏–π

–ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ (50):
- –í—Å–µ –∑–∞–ø—Ä–æ—Å—ã: 50 –ø—Ä–æ–º–∞—Ö–æ–≤

–ò—Ç–æ–≥–æ:
- –ü–æ–ø–∞–¥–∞–Ω–∏—è: 8500
- –ü—Ä–æ–º–∞—Ö–∏: 1050  
- –ü—Ä–æ—Ü–µ–Ω—Ç: 8500/9550 = 89%
```

### **üöÄ –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ Event-Driven –ø–æ–¥—Ö–æ–¥–∞:**

#### **1. –ù–µ—Ç —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á**
```
TTL –∫—ç—à: –ö–∞–∂–¥—É—é –º–∏–Ω—É—Ç—É –ø—Ä–æ–≤–µ—Ä–∫–∞ 1050 –∑–∞–ø–∏—Å–µ–π
Event-Driven: 0 —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á
–≠–∫–æ–Ω–æ–º–∏—è: 100% CPU –Ω–∞ —Ñ–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏
```

#### **2. 100% –∞–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö**
```
TTL –∫—ç—à: –î–∞–Ω–Ω—ã–µ –º–æ–≥—É—Ç –±—ã—Ç—å —É—Å—Ç–∞—Ä–µ–≤—à–∏–º–∏ –¥–æ 5 –º–∏–Ω—É—Ç
Event-Driven: –î–∞–Ω–Ω—ã–µ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
–ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å: 100% vs 95%
```

#### **3. –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ**
```
TTL –∫—ç—à: –†—É—á–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ TTL, –æ—á–∏—Å—Ç–∫–∞
Event-Driven: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ —Å–æ–±—ã—Ç–∏—è–º
–°–ª–æ–∂–Ω–æ—Å—Ç—å: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è vs –°—Ä–µ–¥–Ω—è—è
```

---

## üéØ **–ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏**

### **‚úÖ –°—Ü–µ–Ω–∞—Ä–∏–π 1: –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å**
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 9999 –≤–ø–µ—Ä–≤—ã–µ –ø–∏—à–µ—Ç –±–æ—Ç—É
2. cache.get_role(9999) ‚Üí –ø—Ä–æ–º–∞—Ö
3. fetch_from_db(9999) ‚Üí "user"
4. –ö—ç—à –æ–±–Ω–æ–≤–ª–µ–Ω: {..., 9999: "user"}
5. –í–æ–∑–≤—Ä–∞—Ç: "user"
‚úÖ –†–ê–ë–û–¢–ê–ï–¢: –ù–æ–≤—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±—Ä–∞–±–æ—Ç–∞–Ω
```

### **‚úÖ –°—Ü–µ–Ω–∞—Ä–∏–π 2: –ò–∑–º–µ–Ω–µ–Ω–∏–µ —Ä–æ–ª–∏**
```
1. –ê–¥–º–∏–Ω –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è 8888 –∫–∞–∫ –∞–¥–º–∏–Ω–∞
2. UsersRepo.upsert(8888, role="admin")
3. role_cache.update_role(8888, "admin")
4. –ö—ç—à –æ–±–Ω–æ–≤–ª–µ–Ω: {..., 8888: "admin"}
5. –°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—Ä–æ—Å: –í–æ–∑–≤—Ä–∞—Ç "admin"
‚úÖ –†–ê–ë–û–¢–ê–ï–¢: –†–æ–ª—å –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –º–≥–Ω–æ–≤–µ–Ω–Ω–æ
```

### **‚úÖ –°—Ü–µ–Ω–∞—Ä–∏–π 3: –ü–æ–≤—Ç–æ—Ä–Ω—ã–µ –∑–∞–ø—Ä–æ—Å—ã**
```
1. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å 7777 –¥–µ–ª–∞–µ—Ç 100 –∑–∞–ø—Ä–æ—Å–æ–≤
2. –ü–µ—Ä–≤—ã–π –∑–∞–ø—Ä–æ—Å: –ü—Ä–æ–º–∞—Ö ‚Üí –ë–î ‚Üí –ö—ç—à
3. –ó–∞–ø—Ä–æ—Å—ã 2-100: –ü–æ–ø–∞–¥–∞–Ω–∏—è ‚Üí –ö—ç—à
4. –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞: 1 –ø—Ä–æ–º–∞—Ö, 99 –ø–æ–ø–∞–¥–∞–Ω–∏–π
‚úÖ –†–ê–ë–û–¢–ê–ï–¢: –ö—ç—à —ç—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç
```

### **‚úÖ –°—Ü–µ–Ω–∞—Ä–∏–π 4: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫**
```
1. –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏ –∫—ç—à–∞
2. try: role_cache.update_role(user_id, role)
3. except: logging.warning("Failed to update cache")
4. –°–ª–µ–¥—É—é—â–∏–π –∑–∞–ø—Ä–æ—Å: –ü—Ä–æ–º–∞—Ö ‚Üí –ë–î ‚Üí –ö—ç—à
‚úÖ –†–ê–ë–û–¢–ê–ï–¢: Graceful degradation
```

---

## üèÜ **–ó–∞–∫–ª—é—á–µ–Ω–∏–µ —Å–∏–º—É–ª—è—Ü–∏–∏**

### **Event-Driven –∫—ç—à —Ä–∞–±–æ—Ç–∞–µ—Ç –∏–¥–µ–∞–ª—å–Ω–æ:**

1. **‚úÖ –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: –ù–æ–≤—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –∫—ç—à
2. **‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∏—è**: –†–æ–ª–∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è –º–≥–Ω–æ–≤–µ–Ω–Ω–æ –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏—è—Ö
3. **‚úÖ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 95% –ø–æ–ø–∞–¥–∞–Ω–∏–π –≤ –∫—ç—à
4. **‚úÖ –ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –∏ fallback –Ω–∞ –ë–î
5. **‚úÖ –≠—Ñ—Ñ–µ–∫—Ç–∏–≤–Ω–æ—Å—Ç—å**: –ù–µ—Ç —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á, –º–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞

### **–†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Å–∏–º—É–ª—è—Ü–∏–∏:**
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: 95% –ø–æ–ø–∞–¥–∞–Ω–∏–π (vs 50% —É TTL –∫—ç—à–∞)
- **–ù–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ —Å–∏—Å—Ç–µ–º—É**: –ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è (–Ω–µ—Ç —Ñ–æ–Ω–æ–≤—ã—Ö –∑–∞–¥–∞—á)
- **–ê–∫—Ç—É–∞–ª—å–Ω–æ—Å—Ç—å –¥–∞–Ω–Ω—ã—Ö**: 100% (–æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –ø–æ —Å–æ–±—ã—Ç–∏—è–º)
- **–ù–∞–¥–µ–∂–Ω–æ—Å—Ç—å**: –í—ã—Å–æ–∫–∞—è (graceful degradation)

**Event-Driven –∫—ç—à –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É!** üéâ
